
<!DOCTYPE html><html>
<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8"/>
    
        <title>Design Rationale &mdash; The Cut-Out</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="_static/sphinx-bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css"/>
    <script>
      var badPrefix = "http://ianb.github.com/thecutout";
      if (location.href.search(badPrefix) == 0) {
        var rest = location.href.substr(badPrefix.length);
        location.href = "http://thecutout.org" + rest;
      }
    </script>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
        <script type="text/javascript">
            var DOCUMENTATION_OPTIONS = {
                URL_ROOT:'',
                VERSION:'0.1',
                COLLAPSE_INDEX:false,
                FILE_SUFFIX:'.html',
                HAS_SOURCE:  true
            };
        </script>
            <script type="text/javascript" src="_static/jquery.js"></script>
            <script type="text/javascript" src="_static/underscore.js"></script>
            <script type="text/javascript" src="_static/doctools.js"></script>
            <script type="text/javascript" src="_static/bootstrap-dropdown.js"></script>
        <link rel="top" title="The Cut-Out" href="./"/> 
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    
        <!-- analytics -->
        <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-6731441-13']);
            
            _gaq.push(['_trackPageview']);

            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
        </script>
    
</head>
<body>

    <div class="navbar navbar-static-top">
        <div class="navbar-inner">
            <div class="container">

    <div class="related">
        <ul class="nav">
                <li class=""><a class="brand" href="./">The Cut-Out</a></li>
                <li><a href="quickstart.html">Quick Start</a></li>
<li><a href="library.html">Library Docs</a></li>
<li><a href="protocol.html">Protocol</a></li>
<li class="active"><a href="design.html">Design Rationale</a></li>
 
        </ul>
    </div>
                <div class="pull-right">
                    
        <form class="navbar-search" action="search.html"
              method="get">
            <input type="text" name="q" placeholder="search"/>
            <input type="hidden" name="check_keywords" value="yes"/>
            <input type="hidden" name="area" value="default"/>
        </form>
                </div>
            </div>
        </div>
    </div>


<ul class="quick-links">
    <li><strong>Quick links</strong></li>
    <li>
        <a href="https://github.com/ianb/thecutout/">GitHub</a>
    </li>
    <li>
        <a href="https://github.com/ianb/thecutout/issues?state=open">Issues</a>
    </li>
    <li class="divider">&middot;</li>
    <li>
        <iframe class="github-btn"
                src="http://ghbtns.com/github-btn.html?user=ianb&repo=thecutout&type=watch&count=true"
                allowtransparency="true" frameborder="0" scrolling="0"
                width="110px" height="20px"></iframe>
    </li>
    <li>
        <iframe class="github-btn"
                src="http://ghbtns.com/github-btn.html?user=ianb&repo=thecutout&type=fork&count=true"
                allowtransparency="true" frameborder="0" scrolling="0"
                width="94px" height="20px"></iframe>
    </li>

    <li class="divider">&middot;</li>
    <li class="follow-btn">
        <a href="https://twitter.com/ianbicking"
           class="twitter-follow-button" data-width="145px"
           data-link-color="#0069D6" data-show-count="false">Follow
            @ianbicking</a>
    </li>
    <li class="tweet-btn">
        <a href="https://twitter.com/share" class="twitter-share-button"
           data-url="http://thecutout.org" data-count="horizontal"
           data-via="twbootstrap"
           data-related="ianbicking:Creator of The Cut-Out">Tweet</a>
    </li>
    <li class="plusone-container">
        <g:plusone size="medium"></g:plusone>
    </li>
</ul>  
    <div class="container">
        <div class="content row">
                <div class="span9">
                    
  <div class="section" id="design-rationale">
<h1>Design Rationale<a class="headerlink" href="#design-rationale" title="Permalink to this headline">¶</a></h1>
<div class="section" id="why-not-rest">
<h2>Why Not REST?<a class="headerlink" href="#why-not-rest" title="Permalink to this headline">¶</a></h2>
<p>If you look at the <a class="reference external" href="protocol.html">protocol</a> you might notice that it doesn&#8217;t conform to any of the ideas of <a class="reference external" href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>.  It doesn&#8217;t use status codes for much, it only uses hypertext a little (for blobs), and there&#8217;s really just one URL endpoint.</p>
<p>The protocol is designed with the sync algorithm in mind.  When the client makes a request, the server determines what information it might need, and sends that information.  Using standard HTTP response codes leads to a more chatty protocol, where a request is rejected or a different request is suggested, and then the client has to make that new request.</p>
<p>The request overhead is one request to authenticate (which only needs to be done occasionally), one request to get or check for any updates, and one request to push any updates.  Attempts to push updates may fail if you aren&#8217;t up to date; that conflict situation adds one more request.  One goal of the interaction is to work fairly efficiently in the face of high latency connections, like mobile.</p>
</div>
<div class="section" id="why-no-random-access">
<h2>Why No Random Access?<a class="headerlink" href="#why-no-random-access" title="Permalink to this headline">¶</a></h2>
<p>With The Cut-Out you get a stream of updates.  If you are interested in one particular item (and presumably you know enough to know the id of the object), you can&#8217;t request just that item.  You have to get <em>everything</em> and wait for that item to appear.</p>
<p>The issue, however: how do you know the name of that item?  You must have other data that points to that item you now care about.  Why do you have the pointer and not the object itself?</p>
<p>Instead of giving you pointers, The Cut-Out prefers to give you the data itself.  It also gives you that data in one request, so where with another system you&#8217;d be handed data allowing you to lazily fetch items, it gives you one (perhaps really big) chunk of data to restore everything.  I believe this programming model is much simpler, and in a lot of situations once you&#8217;ve committed to this it gives you a faster system to work with.</p>
<p>There is a way of storing data with an object, where the data must be explicitly fetched (or linked to) using blobs/<tt class="docutils literal"><span class="pre">href</span></tt>.</p>
</div>
<div class="section" id="why-flat-files">
<h2>Why Flat Files?<a class="headerlink" href="#why-flat-files" title="Permalink to this headline">¶</a></h2>
<p>The Cut-Out invents its own file format for storing data, and does not use a second level of client-server for data storage (the client is the browser, the server is the node that holds the file).</p>
<p>This was very much informed by watching development of <a class="reference external" href="https://account.services.mozilla.com/">Firefox Sync</a>, which has dealt with a lot of issues around using different backends.  Each of these backends has its own expectations and complexities.</p>
<p>In the interest of the fewest surprises, The Cut-Out implements its own persistence layer, which is developed alongside the server, client, and protocol.</p>
</div>
<div class="section" id="why-no-data-model">
<h2>Why No Data Model?<a class="headerlink" href="#why-no-data-model" title="Permalink to this headline">¶</a></h2>
<p>Many similar systems include a data model, so that they can notify a larger system about changes coming from upstream, and detect changes that must be sent to the server.  In most cases data still persists in the client, at least to some degree, as it allows everything to be more responsive and more resilient when there are server problems.</p>
</div>
</div>


                    
                        <div id="disqus_thread"></div>
                        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    
                </div>
                <div class="span3">
                    
        <div class="sphinxsidebar">
            <div class="sphinxsidebarwrapper">
                  <ul class="nav nav-list">
                    <li class="nav-header">The Cut-Out Docs</li>
                    <li><a href="quickstart.html">Quick Start</a></li>
<li><a href="library.html">Library Docs</a></li>
<li><a href="protocol.html">Protocol</a></li>


                  </ul>
  <!-- <h3>The Cut-Out</h3> -->
  <ul class="nav nav-list">
<li class="active"><a class="reference internal" href="#">Design Rationale</a><ul>
<li><a class="reference internal" href="#why-not-rest">Why Not REST?</a></li>
<li><a class="reference internal" href="#why-no-random-access">Why No Random Access?</a></li>
<li><a class="reference internal" href="#why-flat-files">Why Flat Files?</a></li>
<li><a class="reference internal" href="#why-no-data-model">Why No Data Model?</a></li>
</ul>
</li>
</ul>

            </div>
        </div>
                </div>
            
        </div>
    </div>
    <div class="footer">
        
        <div class="container">
        </div>
    </div>


    <!-- disqus -->
    <script type="text/javascript">
        var disqus_title = 'Design Rationale &mdash; The Cut-Out';
        var disqus_identifier ='code' + '.' + "thecutout" + window.location.pathname.replace('/', '.');
    </script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "thecutout"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


<script type="text/javascript">
    $('.nav .active').on('click', function () {
        e.preventDefault()
        $(this).siblings().toggle()
    });
</script>

<!-- plusone -->
<script type="text/javascript">
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>

<!-- twitter -->
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>

</body>
</html>
